Using model: gpt-3.5-turbo
# peg-unplug-side: pull the peg out from the side
# def peg_unplug_side(robot):
    # Steps:
    #  1. Put gripper above the peg
    #  2. Grab the peg with the gripper
    #  3. Line the peg up with the hole
    #  4. Slide the peg sideways into the hole
    #  5. Pull the peg out of the hole
    # First, put the gripper above the peg.
    if check("the robot's gripper is not vertically aligned with the peg"):
        robot.move_gripper("vertically aligned with the peg")
    # If the peg becomes left of the gripper, go back to putting the gripper
    # above the peg.
    # Because the peg is a long object, check if the gripper is lined up with it
    # from the front instead of around it.
    if check("peg is not left of the robot's gripper and peg is not forward aligned with the robot's gripper"):
        robot.move_gripper("forward aligned with the peg", close_gripper=True)
    # As long the gripper is still mostly around the peg and the peg isn't lined
    # up with the hole, line up the peg with the hole.
    if check("peg is horizontally aligned with hole"):
        robot.move_gripper("above the peg")
    # If the peg is lined up with the hole to the side, slide it out.
    if check("the robot's gripper is forward aligned with the peg and the peg is horizontally aligned with hole"):
        robot.move_gripper("horizontally aligned with hole", close_gripper=False)
        robot.move_gripper("above the peg")
# peg-unplug-side: pull the peg out from the side
# def peg_unplug_side(robot):
    # Steps:
    #  1. Put gripper above the peg
    #  2. Grab the peg with the gripper
    #  3. Align the peg in the unplugging position
    #  4. Pull the peg out from the hole
    # Put the gripper above the peg.
    if check("the robot's gripper is not vertically aligned with the peg"):
        robot.move_gripper("vertically aligned with the peg")
    # If the peg is not in the correct position for unplugging, align it.
    if check("the peg is not in unplugging position"):

        robot.move_gripper("in unplugging position")
    # Pull the peg out from the hole.
    if check("the peg is in unplugging position and the robot's gripper is holding onto the peg"):
        robot.move_gripper("above the peg and left of the hole")
# peg-unplug-side: pull the peg out from the side
# def peg_unplug_side(robot):
    # Steps:
    #  1. Put gripper above the peg
    #  2. Grab the peg with the gripper
    #  3. Line the peg up to the direction to remove the peg
    #  4. Pull the peg out from the hole
    # First, put the gripper above the peg.
    if check("the robot's gripper is not vertically aligned with the peg"):
        robot.move_gripper("vertically aligned with the peg")
    # If the peg is not near the gripper, move the gripper near to the peg
    # and grab the peg
    if check("the robot's gripper is not around the peg" or "the robot's gripper is open"):
        robot.move_gripper("near the peg", close_gripper=True)
    # If the peg is held by the gripper, start moving towards to the direction
    # to remove the peg.
    if check("the robot's gripper is around the peg"):
        robot.move_gripper("roughly aligned with the direction to remove the peg")
    # Once the gripper is aligned with the direction to remove the peg, pull the
    # peg outwards.
    if check("the robot's gripper is aligned with the direction to remove the peg"):
        robot.move_gripper("out of the hole")
# peg-unplug-side: pull the peg out from the side
# def peg_unplug_side(robot):
    # Steps:
    #  1. Put gripper above the peg
    #  2. Grab the peg with the gripper
    #  3. Tilt the peg out from the hole
    #  4. Pull the peg to the side
    #  5. Examine the peg to confirm that it's removed
    # First, put the gripper above the peg.
    if check("the robot's gripper is not vertically aligned with the peg"):
        robot.move_gripper("vertically aligned with the peg")
    # If the peg becomes left of the gripper, go back to putting the gripper
    # above the peg.
    # Because the peg is a long object, check if the gripper is lined up with it
    # from the front instead of around it.
    if check("peg is not left of the robot's gripper and peg is not forward aligned with the robot's gripper"):
        robot.move_gripper("forward aligned with the peg", close_gripper=True)
    # If the gripper is mostly around the peg but the peg is still in the hole,
    # tilt the peg out of the hole by slightly opening the gripper and moving
    # the gripper to the side.
    if check("the robot's gripper is almost aligned with hole"):
        robot.move_gripper("left of the hole", close_gripper=False)
    # Once the gripper is to the side of the hole, pull the gripper away from
    # the hole to remove the peg.
    if check("the robot's gripper is left of the hole and the peg is not between the gripper claws"):
        robot.move_gripper("above the peg")
    # Finally, confirm that the peg has been removed by examining it.
    if check("the peg is still in the hole"):
        print("Peg removal failed, please retry")
    else:
        print("Peg successfully removed")
# peg-unplug-side: pull the peg out from the side
# def peg_unplug_side(robot):
    # Steps:
    #  1. Put gripper above the peg
    #  2. Grab the peg with the gripper
    #  3. Line the gripper up with the peg and pull it out
    # First, put the gripper above the peg.
    if check("the robot's gripper is not vertically aligned with the peg"):
        robot.move_gripper("vertically aligned with the peg")
    # If the peg becomes left of the gripper, go back to putting the gripper
    # above the peg.
    if check("peg is not left of the robot's gripper and peg is not forward aligned with the robot's gripper"):
        robot.move_gripper("forward aligned with the peg", close_gripper=True)
    # If the gripper is around the peg, pull the peg out.
    if check("the robot's gripper is around the peg"):
        robot.move_gripper("horizontally aligned with the peg", close_gripper=True)
        robot.move_gripper("vertically aligned with the peg", close_gripper=False)
